# Unity Hierarchy æ‰‹åŠ¨è®¾ç½®æŒ‡å—

## ğŸ¯ ç›®æ ‡

åœ¨ Unity åœºæ™¯ä¸­æ‰‹åŠ¨åˆ›å»ºå’Œé…ç½®æ¨ªç‰ˆçº¿æ€§æˆ˜æ–—ç³»ç»Ÿæ‰€éœ€çš„ GameObject å’Œç»„ä»¶ã€‚

## ï¿½ ä½¿ç”¨è§„åˆ™

**ä¸ AI åŠ©æ‰‹å¯¹è¯æ—¶çš„ç»Ÿä¸€è¯­è¨€è§„åˆ™ï¼š**

- âœ… **ç»Ÿä¸€ä½¿ç”¨ä¸­æ–‡** - æ‰€æœ‰å¯¹è¯ã€æé—®ã€å›ç­”éƒ½ä½¿ç”¨ä¸­æ–‡
- âŒ **é¿å…ä½¿ç”¨è‹±è¯­** - ç¡®ä¿äº¤æµæ¸…æ™°ï¼Œé¿å…ä¸­è‹±æ··ç”¨
- ğŸ’¡ **æŠ€æœ¯æœ¯è¯­ä¿æŒè‹±æ–‡** - Unity ç»„ä»¶åç§°ã€æ–¹æ³•åç­‰æŠ€æœ¯åè¯ä¿æŒåŸæ–‡ï¼ˆå¦‚ï¼šGameObjectã€Transformã€Inspector ç­‰ï¼‰
- ğŸ¯ **ç¡®ä¿ç†è§£å‡†ç¡®** - ä¸­æ–‡äº¤æµæœ‰åŠ©äºå‡å°‘è¯¯è§£ï¼Œæé«˜å¼€å‘æ•ˆç‡

**æ–‡æ¡£å†…å®¹è§„åˆ™ï¼š**

- âœ… **åªè®°å½•æ­£ç¡®çš„æ“ä½œæ­¥éª¤** - æ–‡æ¡£ä¸“æ³¨äºæ ‡å‡†é…ç½®æµç¨‹
- âŒ **ä¸è®°å½•æ•…éšœæ’é™¤è¿‡ç¨‹** - è°ƒè¯•ã€é”™è¯¯åˆ†æç­‰å†…å®¹ä¸åœ¨æ­¤æ–‡æ¡£ä¸­è®°å½•
- ğŸ¯ **ä¿æŒç®€æ´æ˜ç¡®** - ç¡®ä¿ç”¨æˆ·èƒ½ç›´æ¥æŒ‰æ­¥éª¤æ“ä½œï¼Œé¿å…æ··æ·†

## ï¿½ğŸ“ çº¯ 2D æ¨ªç‰ˆæ¸¸æˆåæ ‡ç³»è¯´æ˜

âš ï¸ **é‡è¦å£°æ˜ï¼šæœ¬ç³»ç»Ÿä¸“ä¸ºçº¯ 2D æ¨ªç‰ˆæ¸¸æˆè®¾è®¡ï¼Œè§’è‰²ä¸ä¼šåœ¨ Z è½´ä¸Šå®é™…ç§»åŠ¨ï¼**

åæ ‡ç³»ç»Ÿçº¦å®šï¼š

- **X è½´ï¼ˆçº¿æ€§å¸ƒå±€ï¼‰**ï¼šä»å·¦åˆ°å³çš„æˆ˜æœ¯æ’åˆ—
  - ç©å®¶åæ’ï¼šX è½´æœ€å·¦ä¾§ï¼ˆè¿œç¨‹æ”¯æ´ä½ç½®ï¼‰
  - ç©å®¶å‰æ’ï¼šX è½´ä¸­å·¦ï¼ˆè¿‘æˆ˜é˜²å®ˆä½ç½®ï¼‰
  - æ•Œäººå‰æ’ï¼šX è½´ä¸­å³ï¼ˆè¿‘æˆ˜æ”»å‡»ä½ç½®ï¼‰
  - æ•Œäººåæ’ï¼šX è½´æœ€å³ä¾§ï¼ˆè¿œç¨‹æ”¯æ´ä½ç½®ï¼‰
- **Y è½´ï¼ˆä¸Šä¸‹æ’åˆ—ï¼‰**ï¼šæ§åˆ¶å·¦ä¸­å³çš„ä½ç½®æ’åˆ—
  - ä¸Šæ–¹ï¼šY å€¼è¾ƒå¤§ï¼ˆå³ä¾§ä½ç½®ï¼‰
  - ä¸­å¤®ï¼šY å€¼ä¸º 0ï¼ˆä¸­å¤®ä½ç½®ï¼‰
  - ä¸‹æ–¹ï¼šY å€¼è¾ƒå°ï¼ˆå·¦ä¾§ä½ç½®ï¼‰
- **Z è½´ï¼ˆæ¸²æŸ“å±‚ï¼‰**ï¼šå›ºå®šä¸º 0ï¼Œæ‰€æœ‰è§’è‰²åœ¨åŒä¸€ 2D å¹³é¢

**æˆ˜åœºå¸ƒå±€ç¤ºæ„å›¾ï¼š**

```
     Yè½´ â†‘ (ä¸Šæ–¹ï¼Œå³ä¾§ä½ç½®)
         |
 ç©å®¶åæ’ | ç©å®¶å‰æ’ | æ•Œäººå‰æ’ | æ•Œäººåæ’
---------(0,0)-------------------------------- â†’ Xè½´
 (è¿œç¨‹)  | (è¿‘æˆ˜)   | (è¿‘æˆ˜)   | (è¿œç¨‹)
         | â†“ (ä¸‹æ–¹ï¼Œå·¦ä¾§ä½ç½®)
```

**æˆ˜æœ¯æœºåˆ¶æ”¯æŒï¼š**

- **è¿‘æˆ˜é™åˆ¶**ï¼šå‰æ’è¿‘æˆ˜åªèƒ½æ”»å‡»ç›¸é‚»çš„æ•Œæ–¹å‰æ’
- **è¿œç¨‹å‰Šå¼±**ï¼šåæ’è¿œç¨‹æ”»å‡»å¯¹æ–¹åæ’æ—¶æ”»å‡»åŠ›è¢«å‰Šå¼±
- **ä½ç½®æˆ˜æœ¯**ï¼šå‰æ’ä¿æŠ¤åæ’ï¼Œåæ’æä¾›ç«åŠ›æ”¯æ´

**å…³é”®å‚æ•°è¯´æ˜ï¼š**

- `battlefieldDepth`ï¼šæ§åˆ¶ç›¸é‚»æ’ä¹‹é—´çš„ X è½´é—´è·
- `battlefieldWidth`ï¼šæ§åˆ¶ç©å®¶æ–¹ä¸æ•Œäººæ–¹çš„ X è½´æ€»é—´è·
- `positionSpacing`ï¼šæ§åˆ¶ Y è½´ä¸Šå·¦ä¸­å³çš„é—´è·

---

## ğŸ“‹ ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºç®¡ç†å™¨å¯¹è±¡

### 1. åˆ›å»º BattleFormationManager

```
å³é”®Hierarchy â†’ Create Empty
å‘½åä¸º: BattleFormationManager
æ·»åŠ è„šæœ¬: BattleFormationManager.cs
```

**Inspector é…ç½®:**

- Formation Type: `Balanced`
- All Positions: è®¾ç½® Size ä¸º 12ï¼ˆç¨åé…ç½®ï¼‰

### 2. åˆ›å»º HorizontalBattleIntegration

```
å³é”®Hierarchy â†’ Create Empty
å‘½åä¸º: HorizontalBattleIntegration
æ·»åŠ è„šæœ¬: HorizontalBattleIntegration.cs
```

**Inspector é…ç½®:**

- Use Horizontal Formation: âœ… true
- Enable Cover System: âœ… true
- Enable Stealth System: âœ… true
- Formation Manager: æ‹–æ‹½ BattleFormationManager å¯¹è±¡
- Combat Manager: ç•™ç©ºï¼ˆè‡ªåŠ¨æŸ¥æ‰¾ï¼‰

### 3. åˆ›å»º AutoBattleAIï¼ˆå¯é€‰ï¼‰

```
å³é”®Hierarchy â†’ Create Empty
å‘½åä¸º: AutoBattleAI
æ·»åŠ è„šæœ¬: AutoBattleAI.cs
```

**Inspector é…ç½®:**

- Enable Auto Battle: âœ… true
- Decision Delay: 1.0
- Show AI Thoughts: âœ… true
- Healing Priority: 0.8
- Positioning Priority: 0.6
- Offensive Priority: 0.7
- Defensive Priority: 0.5

---

## ğŸ“ ç¬¬äºŒæ­¥ï¼šé…ç½® Spawn ç‚¹

### ğŸ¤– æ–¹å¼ä¸€ï¼šè‡ªåŠ¨ç”Ÿæˆï¼ˆæ¨èï¼‰

BattleFormationManager é»˜è®¤ä¼šè‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰ spawn ç‚¹ä½ç½®ï¼š

**ä¼˜åŠ¿ï¼š**

- âœ… è‡ªåŠ¨åŸºäºæ‘„åƒæœºè§†é‡è®¡ç®—ä½ç½®
- âœ… è€ƒè™‘æˆ˜åœºå®½åº¦å’Œæ·±åº¦
- âœ… æ™ºèƒ½é—´è·åˆ†å¸ƒ
- âœ… é›¶é…ç½®ï¼Œå¼€ç®±å³ç”¨

**é…ç½®å‚æ•°ï¼š**

- `Auto Generate Spawn Points`: âœ… true ï¼ˆé»˜è®¤å¯ç”¨ï¼‰
- `Battlefield Width`: 20 ï¼ˆæ°´å¹³è·ç¦»ï¼šç©å®¶æ–¹åˆ°æ•Œäººæ–¹ï¼‰
- `Battlefield Depth`: 4 ï¼ˆçºµå‘è·ç¦»ï¼šå‰æ’åˆ°åæ’çš„é—´è·ï¼‰
- `Position Spacing`: 2 ï¼ˆè§’è‰²é—´è·ï¼šåŒæ’å†…è§’è‰²ä¹‹é—´çš„è·ç¦»ï¼‰

**ğŸ“Œ çº¯ 2D ç³»ç»Ÿä¸­çš„"æˆ˜åœºæ·±åº¦"è¯´æ˜ï¼š**

åœ¨æœ¬çº¯ 2D æ¨ªç‰ˆæ¸¸æˆç³»ç»Ÿä¸­ï¼Œ`Battlefield Depth` æ§åˆ¶å‰åæ’çš„é€»è¾‘é—´è·ï¼š

- **ç”¨é€”**ï¼šä»…ç”¨äºè§†è§‰å’Œæˆ˜æœ¯ï¼Œä¸æ¶‰åŠè§’è‰²ç§»åŠ¨

  - **è§†è§‰å±‚æ¬¡**ï¼šå‰æ’è§’è‰²æ˜¾ç¤ºåœ¨åæ’å‰é¢ï¼ˆæ¸²æŸ“é¡ºåºï¼‰
  - **æ”»å‡»ä¼˜å…ˆçº§**ï¼šå‰æ’è§’è‰²ä¼˜å…ˆå—åˆ°æ”»å‡»
  - **æˆ˜æœ¯åˆ†ç±»**ï¼šåŒºåˆ†å‰æ’ï¼ˆå¦å…‹ï¼‰å’Œåæ’ï¼ˆæ³•å¸ˆ/å°„æ‰‹ï¼‰
  - **ç‰¹æ•ˆå±‚æ¬¡**ï¼šæŠ€èƒ½åŠ¨ç”»çš„æ·±åº¦æ„Ÿ

- **é‡è¦é™åˆ¶**ï¼š

  - âŒ è§’è‰²ä¸ä¼šåœ¨ Z è½´ä¸Šå®é™…ç§»åŠ¨
  - âŒ ä¸æ˜¯çœŸå®çš„ 3D ç§»åŠ¨ç©ºé—´
  - âœ… ä»…ç”¨äºä½ç½®åˆ†ç±»å’Œè§†è§‰æ’åº

- **æ¨èå€¼**ï¼š
  - **æ‰‹æœºæ¸¸æˆ**ï¼š2-3ï¼ˆå±å¹•å°ï¼Œéœ€è¦ç´§å‡‘å¸ƒå±€ï¼‰
  - **PC æ¸¸æˆ**ï¼š4-5ï¼ˆæ ‡å‡†æ˜¾ç¤ºæ•ˆæœï¼‰
  - **æˆ˜æœ¯æ¸¸æˆ**ï¼š5-6ï¼ˆå¼ºè°ƒå‰åæ’åŒºåˆ†ï¼‰

> ğŸ’¡ **è¯¦ç»†è¯´æ˜**ï¼šå…³äº"æˆ˜åœºæ·±åº¦"çš„å®Œæ•´è§£é‡Šï¼Œè¯·å‚è€ƒ [2D_BATTLEFIELD_DEPTH_GUIDE.md](./2D_BATTLEFIELD_DEPTH_GUIDE.md)

**æ‰‹åŠ¨è§¦å‘ï¼š**
å¦‚éœ€é‡æ–°ç”Ÿæˆï¼Œåœ¨ Inspector ä¸­å³é”® BattleFormationManager ç»„ä»¶ â†’ "Auto Generate Spawn Points"

### ğŸ”§ æ–¹å¼äºŒï¼šæ‰‹åŠ¨åˆ›å»ºï¼ˆè‡ªå®šä¹‰éœ€æ±‚ï¼‰

å¦‚æœæ‚¨éœ€è¦å®Œå…¨è‡ªå®šä¹‰ä½ç½®ï¼Œå¯ä»¥ï¼š

1. åœ¨ Inspector ä¸­è®¾ç½® `Auto Generate Spawn Points` = false
2. æ‰‹åŠ¨åˆ›å»º spawn ç‚¹

#### åˆ›å»º PlayerSpawnPoints çˆ¶å¯¹è±¡

```
å³é”®Hierarchy â†’ Create Empty
å‘½åä¸º: PlayerSpawnPoints
```

#### åˆ›å»º EnemySpawnPoints çˆ¶å¯¹è±¡

```
å³é”®Hierarchy â†’ Create Empty
å‘½åä¸º: EnemySpawnPoints
```

#### æ‰‹åŠ¨è®¾ç½®ä½ç½®

| Spawn ç‚¹åç§°      | Transform Position | æè¿°       | æ•°ç»„ç´¢å¼• |
| ----------------- | ------------------ | ---------- | -------- |
| **ç©å®¶ Spawn ç‚¹** |                    |            |          |
| PlayerSpawn_0     | (-10, 0, -1)       | ç©å®¶åæ’å·¦ | [0]      |
| PlayerSpawn_1     | (-10, 0, 0)        | ç©å®¶åæ’ä¸­ | [1]      |
| PlayerSpawn_2     | (-10, 0, 1)        | ç©å®¶åæ’å³ | [2]      |
| PlayerSpawn_3     | (-6, 0, -1)        | ç©å®¶å‰æ’å·¦ | [3]      |
| PlayerSpawn_4     | (-6, 0, 0)         | ç©å®¶å‰æ’ä¸­ | [4]      |
| PlayerSpawn_5     | (-6, 0, 1)         | ç©å®¶å‰æ’å³ | [5]      |
| **æ•Œäºº Spawn ç‚¹** |                    |            |          |
| EnemySpawn_0      | (6, 0, -1)         | æ•Œäººå‰æ’å·¦ | [0]      |
| EnemySpawn_1      | (6, 0, 0)          | æ•Œäººå‰æ’ä¸­ | [1]      |
| EnemySpawn_2      | (6, 0, 1)          | æ•Œäººå‰æ’å³ | [2]      |
| EnemySpawn_3      | (10, 0, -1)        | æ•Œäººåæ’å·¦ | [3]      |
| EnemySpawn_4      | (10, 0, 0)         | æ•Œäººåæ’ä¸­ | [4]      |
| EnemySpawn_5      | (10, 0, 1)         | æ•Œäººåæ’å³ | [5]      |

---

## ğŸ­ ç¬¬ä¸‰æ­¥ï¼šå‡†å¤‡è§’è‰²å¯¹è±¡

### è§’è‰²å¿…éœ€ç»„ä»¶

æ¯ä¸ªå‚ä¸æˆ˜æ–—çš„è§’è‰² GameObject éœ€è¦ï¼š

- âœ… `CharacterStats` ç»„ä»¶ï¼ˆDND5E æ ¸å¿ƒï¼‰
- å…¶ä»–ç»„ä»¶ä¼šè‡ªåŠ¨æ·»åŠ 

### è§’è‰²å‘½åè§„åˆ™

ä¸ºäº†ç³»ç»Ÿèƒ½æ­£ç¡®è¯†åˆ«ï¼š

- **ç©å®¶è§’è‰²**: åç§°åŒ…å«"Player"ã€"Hero"ã€"Ally"
- **æ•Œäººè§’è‰²**: åç§°åŒ…å«"Enemy"ã€"Monster"ã€"Orc"

æˆ–è€…è®¾ç½®æ­£ç¡®çš„ Tagï¼š

- **ç©å®¶è§’è‰²**: Tag è®¾ä¸º"Player"
- **æ•Œäººè§’è‰²**: Tag è®¾ä¸º"Enemy"

---

## âš™ï¸ ç¬¬å››æ­¥ï¼šé…ç½®ç»„ä»¶å¼•ç”¨å’Œé¢„åˆ¶ä½“

### 1. é…ç½® BattleFormationManager

é€‰ä¸­ BattleFormationManager å¯¹è±¡ï¼š

#### **é…ç½® Spawn ç‚¹æ•°ç»„ï¼š**

1. **Player Spawn Points** - è®¾ç½® Size ä¸º 6ï¼ŒæŒ‰é¡ºåºæ‹–æ‹½ï¼š

   - [0] PlayerSpawn_0 (åæ’å·¦)
   - [1] PlayerSpawn_1 (åæ’ä¸­)
   - [2] PlayerSpawn_2 (åæ’å³)
   - [3] PlayerSpawn_3 (å‰æ’å·¦)
   - [4] PlayerSpawn_4 (å‰æ’ä¸­)
   - [5] PlayerSpawn_5 (å‰æ’å³)

2. **Enemy Spawn Points** - è®¾ç½® Size ä¸º 6ï¼ŒæŒ‰é¡ºåºæ‹–æ‹½ï¼š
   - [0] EnemySpawn_0 (å‰æ’å·¦)
   - [1] EnemySpawn_1 (å‰æ’ä¸­)
   - [2] EnemySpawn_2 (å‰æ’å³)
   - [3] EnemySpawn_3 (åæ’å·¦)
   - [4] EnemySpawn_4 (åæ’ä¸­)
   - [5] EnemySpawn_5 (åæ’å³)

#### **é…ç½®è§’è‰²é¢„åˆ¶ä½“ï¼š**

3. **Player Character Prefabs** - è®¾ç½® Size ä¸º 6ï¼š

   - ä» Project çª—å£æ‹–æ‹½ä½ çš„ç©å®¶è§’è‰²é¢„åˆ¶ä½“åˆ°å¯¹åº”æ§½ä½
   - ä¸æƒ³ä½¿ç”¨çš„ä½ç½®ç•™ç©ºå³å¯
   - ä¾‹å¦‚ï¼š[0] Hero_Warrior, [1] Hero_Mage, [2] ç•™ç©º...

4. **Enemy Character Prefabs** - è®¾ç½® Size ä¸º 6ï¼š
   - ä» Project çª—å£æ‹–æ‹½ä½ çš„æ•Œäººè§’è‰²é¢„åˆ¶ä½“åˆ°å¯¹åº”æ§½ä½
   - ä¸æƒ³ä½¿ç”¨çš„ä½ç½®ç•™ç©ºå³å¯
   - ä¾‹å¦‚ï¼š[0] Orc_Warrior, [1] Orc_Archer, [2] ç•™ç©º...

**ğŸ’¡ çµæ´»é…ç½®ä¼˜åŠ¿ï¼š**

- âœ… **æ”¯æŒéƒ¨åˆ†é…ç½®**ï¼šåªé…ç½®ä½ éœ€è¦çš„è§’è‰²ä½ç½®ï¼Œå…¶ä»–ä½ç½®ç•™ç©º
- âœ… å¯ä»¥éšæ—¶æ›´æ¢ä¸åŒçš„é¢„åˆ¶ä½“
- âœ… æ”¯æŒä¸åŒçš„æˆ˜æ–—é˜µå®¹ç»„åˆï¼ˆ1v1, 2v3, ä»»æ„ç»„åˆï¼‰
- âœ… ç©ºä½ç½®ä¼šè¢«è‡ªåŠ¨å¿½ç•¥ï¼Œä¸å½±å“ç”Ÿæˆ

**ğŸ”§ é…ç½®è¦æ±‚ï¼š**

- é¢„åˆ¶ä½“å¿…é¡»åŒ…å« `CharacterStats` ç»„ä»¶
- å¯¹åº”çš„ spawn ç‚¹å¿…é¡»å­˜åœ¨ä¸”ä¸ä¸º null
- æ•°ç»„ç´¢å¼•å¿…é¡»å¯¹åº”ï¼ˆä¾‹å¦‚ï¼šprefabs[0] å¯¹åº” spawnPoints[0]ï¼‰

### 2. é…ç½® HorizontalBattleIntegration

é€‰ä¸­ HorizontalBattleIntegration å¯¹è±¡ï¼š

- Formation Manager: æ‹–æ‹½ BattleFormationManager å¯¹è±¡

---

## ğŸ® ç¬¬äº”æ­¥ï¼šå¯åŠ¨æˆ˜æ–—

### æ–¹æ³•ä¸€ï¼šé€šè¿‡é¢„åˆ¶ä½“è‡ªåŠ¨ç”Ÿæˆï¼ˆæ¨èï¼‰

```csharp
// è·å–é˜µå‹ç®¡ç†å™¨
BattleFormationManager formationManager = FindObjectOfType<BattleFormationManager>();

// ç›´æ¥åˆå§‹åŒ–æˆ˜æ–—ï¼ˆä¼šè‡ªåŠ¨æ ¹æ®é¢„åˆ¶ä½“ç”Ÿæˆè§’è‰²ï¼‰
formationManager.InitializeBattle();
```

### æ–¹æ³•äºŒï¼šä½¿ç”¨ç°æœ‰è§’è‰²åˆ—è¡¨

```csharp
// è·å–é˜µå‹ç®¡ç†å™¨
BattleFormationManager formationManager = FindObjectOfType<BattleFormationManager>();

// å‡†å¤‡ç°æœ‰è§’è‰²åˆ—è¡¨
List<CharacterStats> playerTeam = new List<CharacterStats>();
List<CharacterStats> enemyTeam = new List<CharacterStats>();
// ... æ·»åŠ è§’è‰²åˆ°åˆ—è¡¨ ...

// ä½¿ç”¨ç°æœ‰è§’è‰²åˆå§‹åŒ–æˆ˜æ–—
formationManager.InitializeBattleWithExistingCharacters(playerTeam, enemyTeam);
```

### æ–¹æ³•ä¸‰ï¼šé€šè¿‡ HorizontalBattleIntegration å¯åŠ¨

```csharp
// è·å–é›†æˆç³»ç»Ÿ
HorizontalBattleIntegration battleSystem = FindObjectOfType<HorizontalBattleIntegration>();

// å¯åŠ¨æ¨ªç‰ˆæˆ˜æ–—ï¼ˆæ–°çš„æ— å‚æ•°ç‰ˆæœ¬ï¼‰
battleSystem.StartHorizontalBattle();
```

### é€šè¿‡ Inspector ä¸€é”®å¯åŠ¨

1. é€‰ä¸­ BattleFormationManager å¯¹è±¡
2. åœ¨ Scene è§†å›¾ä¸­ç‚¹å‡»æ’­æ”¾æŒ‰é’®
3. åœ¨ Inspector ä¸­è°ƒç”¨å¯¹åº”çš„æ–¹æ³•
4. è§’è‰²ä¼šè‡ªåŠ¨åœ¨å¯¹åº”çš„ spawn ç‚¹ç”Ÿæˆæˆ–ç§»åŠ¨

**ğŸ¯ æ–°ç³»ç»Ÿä¼˜åŠ¿ï¼š**

- âœ… æ— éœ€æ‰‹åŠ¨å‡†å¤‡è§’è‰²åˆ—è¡¨
- âœ… ç›´æ¥é€šè¿‡é¢„åˆ¶ä½“è‡ªåŠ¨ç”Ÿæˆ
- âœ… æ”¯æŒçµæ´»çš„é˜µå®¹é…ç½®
- âœ… ç©ºä½ç½®è‡ªåŠ¨è·³è¿‡

---

## ğŸ“Š å®Œæ•´ Hierarchy ç»“æ„ç¤ºä¾‹

### ğŸ¤– è‡ªåŠ¨ç”Ÿæˆæ¨¡å¼ï¼ˆæ¨èï¼‰

```
Hierarchy
â”œâ”€â”€ Main Camera
â”œâ”€â”€ Directional Light
â”œâ”€â”€ BattleFormationManager (BattleFormationManager.cs)
â”‚   â”œâ”€â”€ PlayerSpawnPoints
â”‚   â”‚   â”œâ”€â”€ PlayerSpawn_0_BackLeft (Position: è‡ªåŠ¨è®¡ç®—)
â”‚   â”‚   â”œâ”€â”€ PlayerSpawn_1_BackCenter (Position: è‡ªåŠ¨è®¡ç®—)
â”‚   â”‚   â”œâ”€â”€ PlayerSpawn_2_BackRight (Position: è‡ªåŠ¨è®¡ç®—)
â”‚   â”‚   â”œâ”€â”€ PlayerSpawn_3_FrontLeft (Position: è‡ªåŠ¨è®¡ç®—)
â”‚   â”‚   â”œâ”€â”€ PlayerSpawn_4_FrontCenter (Position: è‡ªåŠ¨è®¡ç®—)
â”‚   â”‚   â””â”€â”€ PlayerSpawn_5_FrontRight (Position: è‡ªåŠ¨è®¡ç®—)
â”‚   â””â”€â”€ EnemySpawnPoints
â”‚       â”œâ”€â”€ EnemySpawn_0_FrontLeft (Position: è‡ªåŠ¨è®¡ç®—)
â”‚       â”œâ”€â”€ EnemySpawn_1_FrontCenter (Position: è‡ªåŠ¨è®¡ç®—)
â”‚       â”œâ”€â”€ EnemySpawn_2_FrontRight (Position: è‡ªåŠ¨è®¡ç®—)
â”‚       â”œâ”€â”€ EnemySpawn_3_BackLeft (Position: è‡ªåŠ¨è®¡ç®—)
â”‚       â”œâ”€â”€ EnemySpawn_4_BackCenter (Position: è‡ªåŠ¨è®¡ç®—)
â”‚       â””â”€â”€ EnemySpawn_5_BackRight (Position: è‡ªåŠ¨è®¡ç®—)
â”œâ”€â”€ HorizontalBattleIntegration (HorizontalBattleIntegration.cs)
â”œâ”€â”€ AutoBattleAI (AutoBattleAI.cs) [å¯é€‰]
â””â”€â”€ [è¿è¡Œæ—¶ç”Ÿæˆçš„è§’è‰²ä¼šè‡ªåŠ¨å‡ºç°åœ¨è¿™é‡Œ]
```

### ğŸ”§ æ‰‹åŠ¨åˆ›å»ºæ¨¡å¼

```
Hierarchy
â”œâ”€â”€ Main Camera
â”œâ”€â”€ Directional Light
â”œâ”€â”€ BattleFormationManager (BattleFormationManager.cs)
â”œâ”€â”€ HorizontalBattleIntegration (HorizontalBattleIntegration.cs)
â”œâ”€â”€ AutoBattleAI (AutoBattleAI.cs) [å¯é€‰]
â”œâ”€â”€ PlayerSpawnPoints
â”‚   â”œâ”€â”€ PlayerSpawn_0 (Position: -10, 0, -1) [åæ’å·¦]
â”‚   â”œâ”€â”€ PlayerSpawn_1 (Position: -10, 0, 0) [åæ’ä¸­]
â”‚   â”œâ”€â”€ PlayerSpawn_2 (Position: -10, 0, 1) [åæ’å³]
â”‚   â”œâ”€â”€ PlayerSpawn_3 (Position: -6, 0, -1) [å‰æ’å·¦]
â”‚   â”œâ”€â”€ PlayerSpawn_4 (Position: -6, 0, 0) [å‰æ’ä¸­]
â”‚   â””â”€â”€ PlayerSpawn_5 (Position: -6, 0, 1) [å‰æ’å³]
â”œâ”€â”€ EnemySpawnPoints
â”‚   â”œâ”€â”€ EnemySpawn_0 (Position: 6, 0, -1) [å‰æ’å·¦]
â”‚   â”œâ”€â”€ EnemySpawn_1 (Position: 6, 0, 0) [å‰æ’ä¸­]
â”‚   â”œâ”€â”€ EnemySpawn_2 (Position: 6, 0, 1) [å‰æ’å³]
â”‚   â”œâ”€â”€ EnemySpawn_3 (Position: 10, 0, -1) [åæ’å·¦]
â”‚   â”œâ”€â”€ EnemySpawn_4 (Position: 10, 0, 0) [åæ’ä¸­]
â”‚   â””â”€â”€ EnemySpawn_5 (Position: 10, 0, 1) [åæ’å³]
â””â”€â”€ [è¿è¡Œæ—¶ç”Ÿæˆçš„è§’è‰²ä¼šè‡ªåŠ¨å‡ºç°åœ¨è¿™é‡Œ]
```

---

## âœ… éªŒè¯è®¾ç½®

### åŸºæœ¬éªŒè¯

è¿è¡Œæ¸¸æˆåï¼ŒConsole åº”è¯¥æ˜¾ç¤ºï¼š

```
=== å¼€å§‹åˆå§‹åŒ–æˆ˜æ–— ===
å¼€å§‹ç”Ÿæˆ Player æ–¹è§’è‰²...
âœ… [è§’è‰²å] æˆåŠŸç”Ÿæˆåˆ°ä½ç½® PlayerBackLeft
å¼€å§‹ç”Ÿæˆ Enemy æ–¹è§’è‰²...
âœ… [è§’è‰²å] æˆåŠŸç”Ÿæˆåˆ°ä½ç½® EnemyFrontCenter
=== æˆ˜æ–—åˆå§‹åŒ–å®Œæˆ ===
```

è§’è‰²åº”è¯¥æ ¹æ®ä½ é…ç½®çš„é¢„åˆ¶ä½“è‡ªåŠ¨ç”Ÿæˆåˆ°å¯¹åº”çš„ spawn ç‚¹ä½ç½®ã€‚

### è§’è‰²å¯è§æ€§è¯Šæ–­

**å¦‚æœè§’è‰²åœ¨ Scene è§†å›¾å¯è§ä½† Game è§†å›¾ä¸å¯è§ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤è¯Šæ–­ï¼š**

#### ğŸ”§ æ­¥éª¤ 1ï¼šä¸€é”®ä¿®å¤ï¼ˆæ¨èï¼‰

- é€‰ä¸­ BattleFormationManager
- å³é”®ç»„ä»¶ â†’ "Force Characters Visible"
- æ­¤æ–¹æ³•ä¼šè‡ªåŠ¨ä¿®å¤å¸¸è§çš„å¯è§æ€§é—®é¢˜

#### ğŸ“· æ­¥éª¤ 2ï¼šæ£€æŸ¥æ‘„åƒæœºè®¾ç½®

ç¡®è®¤ Main Camera çš„è®¾ç½®ï¼š

- **Projection**: Orthographic
- **Size**: 8 æˆ–æ›´å¤§
- **Position**: (0, 0, -10)
- **Culling Mask**: Everything
- **Clear Flags**: Solid Color

#### ğŸ­ æ­¥éª¤ 3ï¼šæ£€æŸ¥è§’è‰²è®¾ç½®

- è§’è‰²çš„ **Layer** ä¸º Default æˆ–è¢«æ‘„åƒæœº Culling Mask åŒ…å«
- è§’è‰²ä½ç½®çš„ **Z åæ ‡** ä¸º 0ï¼ˆ2D æ¸¸æˆæ ‡å‡†ï¼‰
- è§’è‰²çš„ **Renderer** å·²å¯ç”¨
- è§’è‰²çš„ **Materials** ä¸ä¸ºç©º

#### âš™ï¸ æ­¥éª¤ 4ï¼šä½¿ç”¨è°ƒè¯•å·¥å…·

- å³é”® BattleFormationManager â†’ "Adjust Camera View"ï¼ˆè‡ªåŠ¨è°ƒæ•´æ‘„åƒæœºï¼‰
- å³é”® BattleFormationManager â†’ "Debug Configuration"ï¼ˆæŸ¥çœ‹é…ç½®ä¿¡æ¯ï¼‰
- å³é”® BattleFormationManager â†’ "Debug Initialize Battle"ï¼ˆè¯¦ç»†åˆå§‹åŒ–æ—¥å¿—ï¼‰

#### ğŸ“‹ æ­¥éª¤ 5ï¼šæ‰‹åŠ¨æ£€æŸ¥æ¸…å•

å¦‚æœä»¥ä¸Šæ–¹æ³•ä»æ— æ•ˆï¼Œè¯·æ£€æŸ¥ï¼š

1. **æ‘„åƒæœºè§†é‡èŒƒå›´**

   - æ­£äº¤å°ºå¯¸æ˜¯å¦è¶³å¤Ÿå¤§ä»¥åŒ…å«è§’è‰²ä½ç½®
   - æ‘„åƒæœºä½ç½®æ˜¯å¦æ­£ç¡®

2. **è§’è‰²æ¸²æŸ“è®¾ç½®**

   - Renderer ç»„ä»¶æ˜¯å¦å­˜åœ¨ä¸”å¯ç”¨
   - Material æ˜¯å¦æ­£ç¡®åˆ†é…
   - Layer æ˜¯å¦åœ¨æ‘„åƒæœºçš„ CullingMask ä¸­

3. **ä½ç½®å…³ç³»**
   - è§’è‰² Z ä½ç½®æ˜¯å¦åœ¨æ‘„åƒæœºçš„è¿‘è¿œè£å‰ªå¹³é¢ä¹‹é—´
   - è§’è‰²æ˜¯å¦åœ¨æ‘„åƒæœºçš„è§†é”¥ä½“å†…

**ğŸ’¡ å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆï¼š**

- æ‘„åƒæœºæ­£äº¤å°ºå¯¸å¤ªå° â†’ å¢å¤§ Orthographic Size
- è§’è‰² Layer é”™è¯¯ â†’ è®¾ç½®ä¸º Default å±‚
- è§’è‰² Z ä½ç½®é”™è¯¯ â†’ è®¾ç½®ä¸º 0
- æ‘„åƒæœºä½ç½®é”™è¯¯ â†’ è®¾ç½®ä¸º (0, 0, -10)

---

## ğŸ¯ å…³é”®è¦ç‚¹

1. **Spawn ç‚¹çµæ´»é…ç½®** - åªåˆ›å»ºä½ éœ€è¦çš„ spawn ç‚¹
2. **é¢„åˆ¶ä½“æ‹–æ‹½è®¾ç½®** - ç›´æ¥æ‹–æ‹½é¢„åˆ¶ä½“åˆ° Inspector æ•°ç»„ä¸­
3. **ç©ºä½ç½®è‡ªåŠ¨å¿½ç•¥** - ä¸ä½¿ç”¨çš„ä½ç½®ç•™ç©ºå³å¯
4. **è‡ªåŠ¨ç”Ÿæˆè§’è‰²** - æ— éœ€æ‰‹åŠ¨å‡†å¤‡è§’è‰²åˆ—è¡¨
5. **æ”¯æŒä»»æ„é˜µå®¹** - 1v1, 3v3, 6v6 éƒ½æ”¯æŒ

**ğŸ’¡ æ–°ç³»ç»Ÿçš„äººæ€§åŒ–ä¼˜åŠ¿ï¼š**

- ğŸ® **ç”¨æˆ·å‹å¥½** - æ‹–æ‹½é¢„åˆ¶ä½“æ¯”å¡«å†™å¤æ‚æ•°ç»„ç®€å•
- ğŸ”„ **çµæ´»é…ç½®** - éšæ—¶æ›´æ¢ä¸åŒçš„è§’è‰²ç»„åˆ
- âš¡ **å¿«é€Ÿæµ‹è¯•** - ä¸€é”®åˆå§‹åŒ–ï¼Œæ— éœ€å¤æ‚ä»£ç 
- ğŸ¯ **è‡ªç”±è®¾è®¡** - ç©å®¶å¯ä»¥å®Œå…¨è‡ªå®šä¹‰ç«™ä½å’Œé˜µå®¹

**ğŸ“‹ é…ç½®è¦æ±‚æ€»ç»“ï¼š**

1. **å¿…éœ€é…ç½®**ï¼šBattleFormationManager çš„æ‰€æœ‰æ•°ç»„ï¼ˆé¢„åˆ¶ä½“å’Œ spawn ç‚¹ï¼‰
2. **é¢„åˆ¶ä½“è¦æ±‚**ï¼šå¿…é¡»åŒ…å« CharacterStats ç»„ä»¶
3. **æ•°ç»„å¯¹åº”**ï¼šä¿æŒç´¢å¼•å¯¹åº”å…³ç³»ï¼ˆprefabs[0] â†” spawnPoints[0]ï¼‰
4. **é…ç½®é¡ºåº**ï¼šå…ˆé…ç½®æ‰€æœ‰æ•°ç»„ï¼Œå†è¿è¡Œæ¸¸æˆæµ‹è¯•

è¿™æ ·è®¾ç½®åï¼Œä½ çš„æ¨ªç‰ˆæˆ˜æ–—ç³»ç»Ÿå°±å˜å¾—éå¸¸çµæ´»å’Œç”¨æˆ·å‹å¥½äº†ï¼
